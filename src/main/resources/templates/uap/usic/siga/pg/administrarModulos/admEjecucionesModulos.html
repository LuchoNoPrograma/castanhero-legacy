<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="fragments/head :: head">
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
</head>
<script src="https://use.fontawesome.com/c0c323679c.js"></script>

<body>

	<nav th:replace="fragments/header :: nav"></nav>
	<section>
	</section>
	<!-- ======================== SECCION TABLAS ======================  -->
	<div id="tabla" th:if="${operation} == tabla">
		<section class="clients section-bg">
			<div class="container">
				<div class="row">
					<div class="col-12 d-flex flex-column justify-content-center pt-4 pt-lg-0 order-2 order-lg-1"
						data-aos="fade-up" data-aos-delay="200">
						<h2 class="text-dark"><i class="fa fa-folder-o" aria-hidden="true"></i> Resumen de Programas
							Lanzados</h2><br>
						<table id="example" class="table" style="width:100%">
							<thead>
								<tr>
									<th>Programa - Version</th>
									<th>Plan</th>
									<th>Modulos</th>
									<th>Informacion</th>
								</tr>
							</thead>
							<tbody th:each="v,iterStat : ${lVersiones}" th:class="${iterStat.odd}? 'odd'"
								th:remove="tag">
								<tr>
									<td th:text="${v.programa.programa+' - '+v.programa.sigla+' - '+v.version}"></td>
									<td th:text="${v.plan.plan}"></td>
									<td>
										<button class="btn btn-success formGrupos">
											<input type="hidden" th:value="${v.idPgPrgPlnVersiones}">
											<i class="fa-solid fa-book"></i>
										</button>
										<!-- <form th:action="@{/aPostulantes/listarPostulantesPorPrograma}" method="get">
											<input type="hidden" th:value="${prg.idPrograma}" name="idPrograma"/>
											<button type="submit" class="btn btn-primary">
												<i class="fa-solid fa-users"></i>
											</button>
										</form> -->
										<!-- <a th:href="@{/aPostulantes/listarPostulantesPorPrograma={id}(id=${prg.idPrograma})}">
											<i class="btn btn-primary fa-solid fa-users"></i>
										</a> -->
									</td>
									<td>
										<a class="btn btn-primary" th:href="@{/aEjecuciones/administrarGrupo=1}">
											<i class="fa-solid fa-info"></i>
										</a>
									</td>
								</tr>
							</tbody>
							<tfoot>
								<tr>
									<th>Programa - Version</th>
									<th>Plan</th>
									<th>Grupos</th>
									<th>Informacion</th>
								</tr>
							</tfoot>
						</table>
					</div>
				</div>
			</div>
		</section>
	</div>

	<div id="tablaModulos" th:if="${ejecucion} == tablaModulos">
		<section class="clients section-bg">
			<div class="container">
				<div class="row">
					<div class="col-12 d-flex flex-column justify-content-center pt-4 pt-lg-0 order-2 order-lg-1"
						data-aos="fade-up" data-aos-delay="200">
						<h1 class="text-dark" th:text="${plan.programa.programa+' - '+version.version}">
							<i class="fa fa-folder-o" aria-hidden="true"></i>
						</h1><br>
						<h2 th:text="${grupo.grupo}"></h2>
						<table id="example" class="table" style="width:100%">
							<thead>
								<tr>
									<th>Modulos</th>
									<th>Sigla</th>
									<th>Estado</th>
									<th>Administrar</th>
									<th>Reporte</th>
								</tr>
							</thead>
							<tbody th:each="e,iterStat : ${lEjecuciones}" th:class="${iterStat.odd}? 'odd'"
								th:remove="tag">
								<tr>
									<td th:text="${e.modulo.modulo}"></td>
									<td th:text="${e.modulo.sigla}"></td>
									<th:block th:switch="${e.estado}">
										<td th:case="'A'">Disponible</td>
										<td th:case="'E'">En ejecucion</td>
										<td th:case="'F'">Finalizado</td>
									</th:block>
									<td>
										<!-- <a class="btn btn-success formGrupos" href="#">
											<input type="hidden" th:value="${.idModulo}">
											<i class="fa-solid fa-book"></i>
										</a>-->
										<button type="button" class="btn btn-primary botonEjecucionModal" data-bs-toggle="modal"
											data-bs-target="#modal1" th:disabled="${e.estado} != 'A'">
											<input type="hidden" th:value="${e.idEjecucionModulo}">
											<i class="fa-solid fa-clock"></i>
										</button>
										
										<!-- <a th:href="@{/aPostulantes/listarPostulantesPorPrograma={id}(id=${prg.idPrograma})}">
											<i class="btn btn-primary fa-solid fa-users"></i>
										</a> -->
									</td>
									<td>
										<form th:action="@{/aEjecuciones/api/ejecucionModulo}" method="GET">
											<input type="hidden" th:value="${e.idEjecucionModulo}" name="idEjecucion" />
											<button type="submit" class="btn btn-primary">
												<i class="fa-solid fa-file-pdf"></i>
											</button>
										</form>
									</td>
								</tr>
							</tbody>
							<tfoot>
								<tr>
									<th>Modulos</th>
									<th>Sigla</th>
									<th>Estado</th>
									<th>Administrar</th>
									<th>Reporte</th>
								</tr>
							</tfoot>
						</table>
					</div>
				</div>
			</div>
		</section>
	</div>

	<!--====================MODALES=======================-->
	<th:block>
		<div class="modal fade" id="modal1" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
			<div class="modal-dialog modal-form">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="exampleModalLabel">Modal 1</h5>
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					</div>
					<form th:action="@{/aEjecuciones/registrarEjecucionModulo}" method="POST">
						<div class="modal-body">
						
							<input type="hidden" id="idEjecucionModal" name="idEjecucion">
							<label for="moduloModal">Modulo:</label>
							<input type="text" id="moduloModal" class="form-control form-control-lg mb-4" disabled>

							<div class="form-group row">
								<div class="col-md-4">
									<label for="idDocenteModal">Asignar docente:</label>
									<select class="form-control form-control-lg mb-4" name="idDocente" id="idDocenteModal">
										<option disabled>Docentes disponibles</option>
									</select>
								</div>

								<div class="col-md-4">
									<label for="fechaInicioModal">Fecha de inicio:</label>
									<input type="date" id="fechaInicioModal"  name="fechaInicio" class="form-control form-control-lg mb-4"/>
								</div>

								<div class="col-md-4">
									<label for="fechaConclusionModal">Fecha de conclusion:</label>
									<input type="date" id="fechaConclusionModal" name="fechaConclusion" class="form-control form-control-lg mb-4"/>
								</div>
							</div>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
							<button type="submit" class="btn btn-primary">Guardar cambios</button>
						</div>
					</form>
				</div>
			</div>
		</div>
		<style>
			.modal-form {
				position: relative;
				margin-right: auto;
				margin-left: auto;
				height: auto;
				max-width: 90%;
				width: 100%;
				right: 0;
				border: 1;
			}
		</style>
	</th:block>

	<script th:src="@{/js/pgScripts/servicio/EjecucionModuloServicio.js}"></script>
	<script th:src="@{/js/pgScripts/scriptEjecucionesModulos.js}"></script>
	<footer th:replace="fragments/footer :: footer"></footer>
	<!--==============SCRIPTS PERSONALIZADOS==============-->
	<script th:src="@{/js/pgScripts/servicio/DocenteServicio.js}"></script>
	<!-- ============= Inicio busqueda con filtro listado  ==============  -->
	<script th:src="@{/js/utiles/jquery.dataTables.min.js}"></script>
	<script src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap4.min.js"></script>
	<script src="https://cdn.datatables.net/buttons/1.5.2/js/dataTables.buttons.min.js"></script>
	<script src="https://cdn.datatables.net/buttons/1.5.2/js/buttons.bootstrap4.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/pdfmake.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/vfs_fonts.js"></script>
	<script src="https://cdn.datatables.net/buttons/1.5.2/js/buttons.html5.min.js"></script>
	<script src="https://cdn.datatables.net/buttons/1.5.2/js/buttons.print.min.js"></script>
	<script src="https://cdn.datatables.net/buttons/1.5.2/js/buttons.colVis.min.js"></script>
	<script src="https://cdn.datatables.net/responsive/2.2.3/js/dataTables.responsive.min.js"></script>
	<script src="https://cdn.datatables.net/responsive/2.2.3/js/responsive.bootstrap4.min.js"></script>
	<script>
		$(document).ready(function () {
			var table = $('#example').DataTable({
				lengthChange: false,
			});
		})
	</script>
	<div th:replace="fragments/jsScripts :: scripts"></div>


</body>

</html>